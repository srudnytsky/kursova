{"version":3,"file":"exercises.js","sources":["../src/js/api.js","../src/js/exercises.js"],"sourcesContent":["// src/js/api.js\nconst API_BASE = 'https://your-energy.b.goit.study/api';\n\nexport const fetchQuote = async () => {\n  try {\n    const response = await fetch(`${API_BASE}/quote`);\n    if (!response.ok) throw new Error('Failed to fetch quote');\n    return await response.json();\n  } catch (error) {\n    console.error('Error fetching quote:', error);\n    return {\n      quote: \"The only bad workout is the one that didn't happen.\",\n      author: \"Unknown\"\n    };\n  }\n};\n\nexport const fetchFilters = async (filter) => {\n  try {\n    const response = await fetch(`${API_BASE}/filters?filter=${filter}`);\n    if (!response.ok) throw new Error('Failed to fetch filters');\n    return await response.json();\n  } catch (error) {\n    console.error('Error fetching filters:', error);\n    return { results: [] };\n  }\n};\n\nexport const fetchExercises = async (params = {}) => {\n  try {\n    const queryParams = new URLSearchParams(params).toString();\n    const url = `${API_BASE}/exercises${queryParams ? `?${queryParams}` : ''}`;\n    const response = await fetch(url);\n    \n    if (!response.ok) throw new Error('Failed to fetch exercises');\n    const data = await response.json();\n    \n    return {\n      results: data.results || data || [],\n      totalPages: data.totalPages || Math.ceil((data.results || data || []).length / 10),\n      page: params.page || 1,\n      perPage: 10\n    };\n  } catch (error) {\n    console.error('Error fetching exercises:', error);\n    // Return mock data\n    return getMockExercisesData(params);\n  }\n};\n\nexport const fetchExercise = async (id) => {\n  try {\n    const response = await fetch(`${API_BASE}/exercises/${id}`);\n    if (!response.ok) throw new Error('Failed to fetch exercise');\n    return await response.json();\n  } catch (error) {\n    console.error('Error fetching exercise:', error);\n    return getMockExercise(id);\n  }\n};\n\nexport const rateExercise = async (id, rating, email, comment = '') => {\n  try {\n    const response = await fetch(`${API_BASE}/exercises/${id}/rating`, {\n      method: 'PATCH',\n      headers: { \n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n      },\n      body: JSON.stringify({ \n        rate: rating,\n        email: email,\n        review: comment \n      })\n    });\n    \n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}));\n      throw new Error(errorData.message || 'Failed to submit rating');\n    }\n    \n    return await response.json();\n  } catch (error) {\n    console.error('Error rating exercise:', error);\n    return {\n      message: 'Rating submitted successfully (demo mode)',\n      rating: rating\n    };\n  }\n};\n\nexport const subscribe = async (email) => {\n  try {\n    const response = await fetch(`${API_BASE}/subscription`, {\n      method: 'POST',\n      headers: { \n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n      },\n      body: JSON.stringify({ email })\n    });\n    \n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}));\n      throw new Error(errorData.message || 'Failed to subscribe');\n    }\n    \n    return await response.json();\n  } catch (error) {\n    console.error('Error subscribing:', error);\n    return {\n      message: 'Subscribed successfully (demo mode)'\n    };\n  }\n};\n\n// Mock data functions\nfunction getMockExercisesData(params = {}) {\n  const mockExercises = [\n    {\n      _id: '1',\n      name: \"3/4 sit-up\",\n      rating: 4.0,\n      burnedCalories: 220,\n      time: 3,\n      bodyPart: \"Waist\",\n      target: \"Abs\",\n      equipment: \"None\",\n      popularity: 156\n    },\n    {\n      _id: '2',\n      name: \"Barbell reverse preacher curl\",\n      rating: 5.0,\n      burnedCalories: 153,\n      time: 3,\n      bodyPart: \"Waist\",\n      target: \"Biceps\",\n      equipment: \"Barbell\",\n      popularity: 89\n    },\n    {\n      _id: '3',\n      name: \"Barbell side split squat v. 2\",\n      rating: 5.0,\n      burnedCalories: 60,\n      time: 3,\n      bodyPart: \"Waist\",\n      target: \"Quads\",\n      equipment: \"Barbell\",\n      popularity: 112\n    },\n    {\n      _id: '4',\n      name: \"Barbell rollerout\",\n      rating: 5.0,\n      burnedCalories: 87,\n      time: 3,\n      bodyPart: \"Waist\",\n      target: \"Abs\",\n      equipment: \"Barbell\",\n      popularity: 76\n    },\n    {\n      _id: '5',\n      name: \"45° side bend\",\n      rating: 5.0,\n      burnedCalories: 323,\n      time: 3,\n      bodyPart: \"Waist\",\n      target: \"Abs\",\n      equipment: \"Dumbbells\",\n      popularity: 142\n    },\n    {\n      _id: '6',\n      name: \"Air bike\",\n      rating: 4.0,\n      burnedCalories: 312,\n      time: 3,\n      bodyPart: \"Waist\",\n      target: \"Abs\",\n      equipment: \"None\",\n      popularity: 98\n    },\n    {\n      _id: '7',\n      name: \"Stationary bike walk\",\n      rating: 4.0,\n      burnedCalories: 60,\n      time: 3,\n      bodyPart: \"Waist\",\n      target: \"Cardiovascular system\",\n      equipment: \"Stationary bike\",\n      popularity: 116\n    }\n  ];\n\n  let filtered = [...mockExercises];\n  \n  if (params.filter) {\n    if (params.filter === 'muscles') {\n      filtered = filtered.filter(ex => ['Abs', 'Biceps', 'Quads'].includes(ex.target));\n    } else if (params.filter === 'bodyparts') {\n      filtered = filtered.filter(ex => ex.bodyPart === 'Waist');\n    } else if (params.filter === 'equipment') {\n      filtered = filtered.filter(ex => ex.equipment !== 'None');\n    }\n  }\n  \n  if (params.keyword) {\n    const keyword = params.keyword.toLowerCase();\n    filtered = filtered.filter(ex => \n      ex.name.toLowerCase().includes(keyword) ||\n      ex.target.toLowerCase().includes(keyword) ||\n      ex.bodyPart.toLowerCase().includes(keyword)\n    );\n  }\n  \n  const page = parseInt(params.page) || 1;\n  const perPage = 10;\n  const startIndex = (page - 1) * perPage;\n  const endIndex = startIndex + perPage;\n  const paginated = filtered.slice(startIndex, endIndex);\n  \n  return {\n    results: paginated,\n    totalPages: Math.ceil(filtered.length / perPage),\n    page: page,\n    perPage: perPage,\n    total: filtered.length\n  };\n}\n\nfunction getMockExercise(id) {\n  const mockExercises = {\n    '1': {\n      _id: '1',\n      name: \"3/4 sit-up\",\n      rating: 4.0,\n      burnedCalories: 220,\n      time: 3,\n      bodyPart: \"Waist\",\n      target: \"Abs\",\n      equipment: \"None\",\n      popularity: 156,\n      description: \"A modified sit-up that targets the abdominal muscles. Perform by lying on your back with knees bent, then lifting your upper body until your torso is at a 45-degree angle.\",\n      difficulty: \"Beginner\"\n    },\n    '2': {\n      _id: '2',\n      name: \"Barbell reverse preacher curl\",\n      rating: 5.0,\n      burnedCalories: 153,\n      time: 3,\n      bodyPart: \"Waist\",\n      target: \"Biceps\",\n      equipment: \"Barbell\",\n      popularity: 89,\n      description: \"An isolation exercise for the biceps that uses a preacher bench with a reverse grip. Focuses on the brachialis muscle for arm thickness.\",\n      difficulty: \"Intermediate\"\n    },\n    '7': {\n      _id: '7',\n      name: \"Stationary bike walk\",\n      rating: 4.0,\n      burnedCalories: 60,\n      time: 3,\n      bodyPart: \"Waist\",\n      target: \"Cardiovascular system\",\n      equipment: \"Stationary bike\",\n      popularity: 116,\n      description: \"While not a muscle, this system is essential for endurance training. Aerobic exercises like running, cycling, and swimming improve cardiovascular health.\",\n      difficulty: \"Beginner\"\n    }\n  };\n  \n  return mockExercises[id] || mockExercises['1'];\n}","import { fetchQuote, fetchExercises, fetchExercise, rateExercise, subscribe } from './api.js';\n\nclass ExercisesApp {\n  constructor() {\n    this.searchInput = document.getElementById('search-input');\n    this.searchButton = document.getElementById('search-button');\n    this.exercisesContainer = document.getElementById('exercises-container');\n    this.filterButtons = document.querySelectorAll('.filter-btn');\n    this.currentCategory = document.querySelector('.current-category');\n    this.pagination = document.getElementById('pagination');\n    this.dailyQuote = document.getElementById('daily-quote');\n    this.quoteAuthor = document.getElementById('quote-author');\n    \n    // Модальні вікна\n    this.exerciseModal = document.getElementById('exercise-modal');\n    this.ratingModal = document.getElementById('rating-modal');\n    this.modalClose = document.getElementById('modal-close');\n    this.ratingModalClose = document.getElementById('rating-modal-close');\n    this.submitRatingBtn = document.getElementById('submit-rating');\n    this.ratingStars = document.getElementById('rating-stars');\n    this.ratingComment = document.getElementById('rating-comment');\n    this.ratingEmail = document.getElementById('rating-email');\n    \n    // Підписка\n    this.subscribeForm = document.getElementById('subscribe-form');\n    this.subscribeEmail = document.getElementById('email-input');\n    \n    this.currentFilter = 'Muscles';\n    this.currentSearch = '';\n    this.currentPage = 1;\n    this.currentExerciseId = null;\n    this.selectedRating = 0;\n    \n    this.userRatings = JSON.parse(localStorage.getItem('userRatings')) || {};\n    this.favorites = JSON.parse(localStorage.getItem('favorites')) || [];\n    \n    this.init();\n  }\n  \n  async init() {\n    await this.loadDailyQuote();\n    await this.loadExercises();\n    this.initEventListeners();\n  }\n  \n  async loadDailyQuote() {\n    try {\n      const quoteData = await fetchQuote();\n      if (this.dailyQuote && this.quoteAuthor) {\n        this.dailyQuote.textContent = `\"${quoteData.quote}\"`;\n        this.quoteAuthor.textContent = `- ${quoteData.author}`;\n      }\n    } catch (error) {\n      console.error('Error loading quote:', error);\n      this.dailyQuote.textContent = `\"A lot of times I find that people who are blessed with the most talent don't ever develop that attitude, and the ones who aren't blessed in that way are the most competitive and have the biggest heart.\"`;\n      this.quoteAuthor.textContent = '- Tom Brady';\n    }\n  }\n  \n  async loadExercises() {\n    try {\n      this.showLoading();\n      \n      const params = {};\n      \n      // Додаємо пошук або фільтри\n      if (this.currentSearch) {\n        params.keyword = this.currentSearch;\n      } else {\n        // Якщо немає пошуку — не додаємо фільтри (бо немає конкретного значення)\n        // API поверне всі вправи за замовчуванням\n      }\n      \n      params.page = this.currentPage;\n      params.limit = 10;\n      \n      const data = await fetchExercises(params);\n      let exercises = [];\n      let totalPages = 1;\n      \n      if (Array.isArray(data)) {\n        exercises = data;\n        totalPages = Math.ceil(exercises.length / 10);\n      } else if (data.results && Array.isArray(data.results)) {\n        exercises = data.results;\n        totalPages = data.totalPages || Math.ceil((data.total || exercises.length) / 10);\n      } else if (data.exercises && Array.isArray(data.exercises)) {\n        exercises = data.exercises;\n        totalPages = data.totalPages || Math.ceil((data.total || exercises.length) / 10);\n      }\n      \n      this.renderExercises(exercises);\n      this.renderPagination(totalPages);\n      \n    } catch (error) {\n      console.error('Error loading exercises:', error);\n      this.showError('Failed to load exercises. Please try again.');\n    }\n  }\n  \n  initEventListeners() {\n    if (this.searchButton) {\n      this.searchButton.addEventListener('click', () => this.handleSearch());\n    }\n    \n    if (this.searchInput) {\n      this.searchInput.addEventListener('keypress', (e) => {\n        if (e.key === 'Enter') {\n          this.handleSearch();\n        }\n      });\n    }\n    \n    this.filterButtons.forEach(btn => {\n      btn.addEventListener('click', () => {\n        this.filterButtons.forEach(b => b.classList.remove('active'));\n        btn.classList.add('active');\n        this.currentFilter = btn.dataset.filter;\n        this.currentCategory.textContent = this.currentFilter;\n        this.currentSearch = '';\n        if (this.searchInput) this.searchInput.value = '';\n        this.currentPage = 1;\n        this.loadExercises();\n      });\n    });\n    \n    if (this.modalClose) {\n      this.modalClose.addEventListener('click', () => this.closeExerciseModal());\n    }\n    \n    if (this.ratingModalClose) {\n      this.ratingModalClose.addEventListener('click', () => this.closeRatingModal());\n    }\n    \n    [this.exerciseModal, this.ratingModal].forEach(modal => {\n      if (modal) {\n        modal.addEventListener('click', (e) => {\n          if (e.target === modal) {\n            this.closeAllModals();\n          }\n        });\n      }\n    });\n    \n    document.addEventListener('keydown', (e) => {\n      if (e.key === 'Escape') {\n        this.closeAllModals();\n      }\n    });\n    \n    if (this.ratingStars) {\n      const stars = this.ratingStars.querySelectorAll('span');\n      stars.forEach(star => {\n        star.addEventListener('click', () => {\n          this.selectedRating = parseInt(star.dataset.rating);\n          this.updateStars(this.selectedRating);\n        });\n      });\n    }\n    \n    if (this.submitRatingBtn) {\n      this.submitRatingBtn.addEventListener('click', (e) => {\n        e.preventDefault();\n        this.handleRatingSubmit();\n      });\n    }\n    \n    if (this.subscribeForm) {\n      this.subscribeForm.addEventListener('submit', (e) => {\n        e.preventDefault();\n        this.handleSubscribe();\n      });\n    }\n  }\n  \n  async handleSearch() {\n    this.currentSearch = this.searchInput.value.trim();\n    this.currentPage = 1;\n    await this.loadExercises();\n  }\n  \n  showLoading() {\n    if (this.exercisesContainer) {\n      this.exercisesContainer.innerHTML = '<div class=\"loading\">Loading exercises...</div>';\n    }\n  }\n  \n  showError(message) {\n    if (this.exercisesContainer) {\n      this.exercisesContainer.innerHTML = `\n        <div class=\"error-message\">\n          <strong>Error</strong>\n          <p>${message}</p>\n          <button onclick=\"exercisesApp.loadExercises()\">Try Again</button>\n        </div>\n      `;\n    }\n  }\n  \n  renderExercises(exercises) {\n    if (!this.exercisesContainer) return;\n    \n    if (exercises.length === 0) {\n      this.exercisesContainer.innerHTML = `\n        <div class=\"no-results\">\n          <h3>No exercises found</h3>\n          <p>Try adjusting your search or filter to find what you're looking for.</p>\n        </div>\n      `;\n      return;\n    }\n    \n    this.exercisesContainer.innerHTML = exercises.map(exercise => `\n      <div class=\"exercise-item\" data-id=\"${exercise._id || exercise.id}\">\n        <div class=\"exercise-header\">\n          <h3 class=\"exercise-title\">${exercise.name}</h3>\n          <div class=\"exercise-rating-small\">\n            <span class=\"star-rating\">${this.getStarsHTML(exercise.rating || 0)}</span> ${exercise.rating || 0}\n          </div>\n        </div>\n        <div class=\"exercise-info\">\n          <div class=\"info-row\">\n            <span class=\"info-label\">Burned calories:</span>\n            <span class=\"info-value\">${exercise.burnedCalories || exercise.calories || 0} / ${exercise.time || 3} min</span>\n          </div>\n          <div class=\"info-row\">\n            <span class=\"info-label\">Body part:</span>\n            <span class=\"info-value\">${exercise.bodyPart || 'Waist'}</span>\n          </div>\n          <div class=\"info-row\">\n            <span class=\"info-label\">Target:</span>\n            <span class=\"info-value\">${exercise.target || 'Abs'}</span>\n          </div>\n        </div>\n        <div class=\"exercise-footer\">\n          <div class=\"exercise-categories\">\n            <span class=\"category-tag\">${this.currentFilter}</span>\n            ${exercise.equipment && exercise.equipment !== 'None' ? `<span class=\"category-tag\">${exercise.equipment}</span>` : ''}\n          </div>\n          <button class=\"btn-start\" onclick=\"exercisesApp.openExerciseModal('${exercise._id || exercise.id}')\">Start</button>\n        </div>\n      </div>\n    `).join('');\n  }\n  \n  renderPagination(totalPages) {\n    if (!this.pagination || totalPages <= 1) {\n      if (this.pagination) this.pagination.innerHTML = '';\n      return;\n    }\n    \n    let paginationHTML = '';\n    \n    if (this.currentPage > 1) {\n      paginationHTML += `<button class=\"page-btn prev-btn\" onclick=\"exercisesApp.goToPage(${this.currentPage - 1})\">←</button>`;\n    }\n    \n    for (let i = 1; i <= totalPages; i++) {\n      if (i === this.currentPage) {\n        paginationHTML += `<button class=\"page-btn active\">${i}</button>`;\n      } else {\n        paginationHTML += `<button class=\"page-btn\" onclick=\"exercisesApp.goToPage(${i})\">${i}</button>`;\n      }\n    }\n    \n    if (this.currentPage < totalPages) {\n      paginationHTML += `<button class=\"page-btn next-btn\" onclick=\"exercisesApp.goToPage(${this.currentPage + 1})\">→</button>`;\n    }\n    \n    this.pagination.innerHTML = paginationHTML;\n  }\n  \n  async goToPage(page) {\n    this.currentPage = page;\n    await this.loadExercises();\n    window.scrollTo({ top: this.exercisesContainer.offsetTop - 100, behavior: 'smooth' });\n  }\n  \n  async openExerciseModal(exerciseId) {\n    try {\n      this.currentExerciseId = exerciseId;\n      const exercise = await fetchExercise(exerciseId);\n      \n      const modalContent = document.getElementById('modal-content');\n      if (modalContent) {\n        const isFavorite = this.favorites.some(fav => fav.id === exerciseId);\n        \n        modalContent.innerHTML = `\n          <div class=\"exercise-details\">\n            <h2>${exercise.name}</h2>\n            <div class=\"exercise-rating\">\n              <span class=\"star-rating\">${this.getStarsHTML(exercise.rating || 0)}</span> ${exercise.rating || 0} (${exercise.popularity || 0} reviews)\n            </div>\n            <div class=\"exercise-meta\">\n              <div class=\"meta-item\">\n                <div class=\"meta-label\">Target</div>\n                <div class=\"meta-value\">${exercise.target || 'Abs'}</div>\n              </div>\n              <div class=\"meta-item\">\n                <div class=\"meta-label\">Body part</div>\n                <div class=\"meta-value\">${exercise.bodyPart || 'Waist'}</div>\n              </div>\n              <div class=\"meta-item\">\n                <div class=\"meta-label\">Equipment</div>\n                <div class=\"meta-value\">${exercise.equipment || 'None'}</div>\n              </div>\n              <div class=\"meta-item\">\n                <div class=\"meta-label\">Burned calories</div>\n                <div class=\"meta-value\">${exercise.burnedCalories || exercise.calories || 0} / ${exercise.time || 3} min</div>\n              </div>\n            </div>\n            <div class=\"exercise-description\">\n              <p>${exercise.description || 'No description available.'}</p>\n            </div>\n            <div class=\"exercise-actions\">\n              <button class=\"action-btn btn-favorite\" onclick=\"exercisesApp.toggleFavorite('${exerciseId}')\">\n                ${isFavorite ? 'Remove from Favorites' : 'Add to Favorites'}\n              </button>\n              <button class=\"action-btn btn-rating\" onclick=\"exercisesApp.openRatingModal()\">\n                Give a rating\n              </button>\n            </div>\n          </div>\n        `;\n      }\n      \n      this.exerciseModal.style.display = 'flex';\n      document.body.style.overflow = 'hidden';\n      \n    } catch (error) {\n      console.error('Error opening exercise modal:', error);\n      this.showNotification('Failed to load exercise details', 'error');\n    }\n  }\n  \n  closeExerciseModal() {\n    this.exerciseModal.style.display = 'none';\n    document.body.style.overflow = 'auto';\n  }\n  \n  openRatingModal() {\n    this.closeExerciseModal();\n    this.ratingModal.style.display = 'flex';\n    document.body.style.overflow = 'hidden';\n    this.resetRatingForm();\n  }\n  \n  closeRatingModal() {\n    this.ratingModal.style.display = 'none';\n    document.body.style.overflow = 'auto';\n  }\n  \n  closeAllModals() {\n    this.closeExerciseModal();\n    this.closeRatingModal();\n  }\n  \n  updateStars(rating) {\n    const stars = this.ratingStars.querySelectorAll('span');\n    stars.forEach((star, index) => {\n      if (index < rating) {\n        star.classList.add('active');\n      } else {\n        star.classList.remove('active');\n      }\n    });\n  }\n  \n  resetRatingForm() {\n    this.selectedRating = 0;\n    this.updateStars(0);\n    if (this.ratingComment) this.ratingComment.value = '';\n    if (this.ratingEmail) this.ratingEmail.value = '';\n  }\n  \n  async handleRatingSubmit() {\n    if (!this.selectedRating) {\n      this.showNotification('Please select a rating!', 'error');\n      return;\n    }\n    \n    const email = this.ratingEmail ? this.ratingEmail.value.trim() : '';\n    const comment = this.ratingComment ? this.ratingComment.value.trim() : '';\n    \n    if (!email || !this.isValidEmail(email)) {\n      this.showNotification('Please enter a valid email address!', 'error');\n      return;\n    }\n    \n    try {\n      await rateExercise(this.currentExerciseId, this.selectedRating, email, comment);\n      \n      this.userRatings[this.currentExerciseId] = {\n        rating: this.selectedRating,\n        comment: comment,\n        email: email,\n        date: new Date().toISOString()\n      };\n      localStorage.setItem('userRatings', JSON.stringify(this.userRatings));\n      \n      this.showNotification('Thank you for your rating!', 'success');\n      this.closeRatingModal();\n      \n    } catch (error) {\n      console.error('Error submitting rating:', error);\n      this.showNotification('Rating submitted successfully', 'success');\n      this.closeRatingModal();\n    }\n  }\n  \n  async handleSubscribe() {\n    const email = this.subscribeEmail ? this.subscribeEmail.value.trim() : '';\n    \n    if (!email || !this.isValidEmail(email)) {\n      this.showNotification('Please enter a valid email address!', 'error');\n      return;\n    }\n    \n    try {\n      await subscribe(email);\n      this.showNotification('Thank you for subscribing!', 'success');\n      if (this.subscribeForm) this.subscribeForm.reset();\n    } catch (error) {\n      console.error('Error subscribing:', error);\n      this.showNotification('Subscribed successfully', 'success');\n      if (this.subscribeForm) this.subscribeForm.reset();\n    }\n  }\n  \n  // ✅ ОСНОВНИЙ МЕТОД: додавання до улюблених\n  toggleFavorite(exerciseId) {\n    // Спробуємо отримати дані з модального вікна\n    const modalContent = document.getElementById('modal-content');\n    if (!modalContent) return;\n    \n    const name = modalContent.querySelector('h2')?.textContent || 'Unknown';\n    const metaItems = modalContent.querySelectorAll('.meta-item');\n    \n    let bodyPart = 'N/A', target = 'N/A', burnedCalories = '0', time = '3';\n    \n    metaItems.forEach(item => {\n      const label = item.querySelector('.meta-label')?.textContent;\n      const value = item.querySelector('.meta-value')?.textContent;\n      \n      if (label === 'Body part') bodyPart = value;\n      if (label === 'Target') target = value;\n      if (label === 'Burned calories') {\n        const parts = value.split(' / ');\n        burnedCalories = parts[0] || '0';\n        time = parts[1]?.split(' min')[0] || '3';\n      }\n    });\n    \n    const exerciseData = { id: exerciseId, name, bodyPart, target, burnedCalories, time };\n    const index = this.favorites.findIndex(fav => fav.id === exerciseId);\n    \n    if (index === -1) {\n      this.favorites.push(exerciseData);\n      this.showNotification('Added to favorites!', 'success');\n    } else {\n      this.favorites.splice(index, 1);\n      this.showNotification('Removed from favorites!', 'info');\n    }\n    \n    localStorage.setItem('favorites', JSON.stringify(this.favorites));\n    \n    // Оновлюємо кнопку в модальному вікні\n    const favoriteBtn = document.querySelector('.btn-favorite');\n    if (favoriteBtn) {\n      const isFavorite = this.favorites.some(fav => fav.id === exerciseId);\n      favoriteBtn.textContent = isFavorite ? 'Remove from Favorites' : 'Add to Favorites';\n    }\n  }\n  \n  // Helper methods\n  getStarsHTML(rating) {\n    const fullStars = Math.floor(rating);\n    const hasHalfStar = rating % 1 >= 0.5;\n    let stars = '';\n    \n    for (let i = 0; i < 5; i++) {\n      if (i < fullStars) {\n        stars += '★';\n      } else if (i === fullStars && hasHalfStar) {\n        stars += '½';\n      } else {\n        stars += '☆';\n      }\n    }\n    \n    return stars;\n  }\n  \n  isValidEmail(email) {\n    const re = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    return re.test(email);\n  }\n  \n  showNotification(message, type = 'info') {\n    const oldNotification = document.querySelector('.notification');\n    if (oldNotification) {\n      oldNotification.remove();\n    }\n    \n    const notification = document.createElement('div');\n    notification.className = `notification notification-${type}`;\n    notification.textContent = message;\n    \n    notification.style.cssText = `\n      position: fixed;\n      top: 100px;\n      right: 20px;\n      background: ${type === 'success' ? '#4CAF50' : type === 'error' ? '#f44336' : '#2196F3'};\n      color: white;\n      padding: 12px 20px;\n      border-radius: 8px;\n      z-index: 1000;\n      box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n      animation: slideInRight 0.3s ease;\n    `;\n    \n    document.body.appendChild(notification);\n    \n    setTimeout(() => {\n      if (notification.parentNode) notification.remove();\n    }, 3000);\n    \n    const style = document.createElement('style');\n    style.textContent = `\n      @keyframes slideInRight {\n        from { transform: translateX(100%); opacity: 0; }\n        to { transform: translateX(0); opacity: 1; }\n      }\n    `;\n    document.head.appendChild(style);\n  }\n}\n\nconst exercisesApp = new ExercisesApp();\nwindow.exercisesApp = exercisesApp;"],"names":["API_BASE","fetchQuote","response","error","fetchExercises","params","queryParams","url","data","getMockExercisesData","fetchExercise","id","getMockExercise","rateExercise","rating","email","comment","errorData","subscribe","filtered","ex","keyword","page","perPage","startIndex","endIndex","mockExercises","ExercisesApp","quoteData","exercises","totalPages","e","btn","b","modal","star","message","exercise","paginationHTML","i","exerciseId","modalContent","isFavorite","fav","index","name","metaItems","bodyPart","target","burnedCalories","time","item","label","value","parts","exerciseData","favoriteBtn","fullStars","hasHalfStar","stars","type","oldNotification","notification","style","exercisesApp"],"mappings":"oCACA,MAAMA,EAAW,uCAEJC,EAAa,SAAY,CACpC,GAAI,CACF,MAAMC,EAAW,MAAM,MAAM,GAAGF,CAAQ,QAAQ,EAChD,GAAI,CAACE,EAAS,GAAI,MAAM,IAAI,MAAM,uBAAuB,EACzD,OAAO,MAAMA,EAAS,KAAI,CAC5B,OAASC,EAAO,CACd,eAAQ,MAAM,wBAAyBA,CAAK,EACrC,CACL,MAAO,sDACP,OAAQ,SACd,CACE,CACF,EAaaC,EAAiB,MAAOC,EAAS,KAAO,CACnD,GAAI,CACF,MAAMC,EAAc,IAAI,gBAAgBD,CAAM,EAAE,SAAQ,EAClDE,EAAM,GAAGP,CAAQ,aAAaM,EAAc,IAAIA,CAAW,GAAK,EAAE,GAClEJ,EAAW,MAAM,MAAMK,CAAG,EAEhC,GAAI,CAACL,EAAS,GAAI,MAAM,IAAI,MAAM,2BAA2B,EAC7D,MAAMM,EAAO,MAAMN,EAAS,KAAI,EAEhC,MAAO,CACL,QAASM,EAAK,SAAWA,GAAQ,CAAA,EACjC,WAAYA,EAAK,YAAc,KAAK,MAAMA,EAAK,SAAWA,GAAQ,IAAI,OAAS,EAAE,EACjF,KAAMH,EAAO,MAAQ,EACrB,QAAS,EACf,CACE,OAASF,EAAO,CACd,eAAQ,MAAM,4BAA6BA,CAAK,EAEzCM,EAAqBJ,CAAM,CACpC,CACF,EAEaK,EAAgB,MAAOC,GAAO,CACzC,GAAI,CACF,MAAMT,EAAW,MAAM,MAAM,GAAGF,CAAQ,cAAcW,CAAE,EAAE,EAC1D,GAAI,CAACT,EAAS,GAAI,MAAM,IAAI,MAAM,0BAA0B,EAC5D,OAAO,MAAMA,EAAS,KAAI,CAC5B,OAASC,EAAO,CACd,eAAQ,MAAM,2BAA4BA,CAAK,EACxCS,EAAgBD,CAAE,CAC3B,CACF,EAEaE,EAAe,MAAOF,EAAIG,EAAQC,EAAOC,EAAU,KAAO,CACrE,GAAI,CACF,MAAMd,EAAW,MAAM,MAAM,GAAGF,CAAQ,cAAcW,CAAE,UAAW,CACjE,OAAQ,QACR,QAAS,CACP,eAAgB,mBAChB,OAAU,kBAClB,EACM,KAAM,KAAK,UAAU,CACnB,KAAMG,EACN,MAAOC,EACP,OAAQC,CAChB,CAAO,CACP,CAAK,EAED,GAAI,CAACd,EAAS,GAAI,CAChB,MAAMe,EAAY,MAAMf,EAAS,KAAI,EAAG,MAAM,KAAO,CAAA,EAAG,EACxD,MAAM,IAAI,MAAMe,EAAU,SAAW,yBAAyB,CAChE,CAEA,OAAO,MAAMf,EAAS,KAAI,CAC5B,OAASC,EAAO,CACd,eAAQ,MAAM,yBAA0BA,CAAK,EACtC,CACL,QAAS,4CACT,OAAQW,CACd,CACE,CACF,EAEaI,EAAY,MAAOH,GAAU,CACxC,GAAI,CACF,MAAMb,EAAW,MAAM,MAAM,GAAGF,CAAQ,gBAAiB,CACvD,OAAQ,OACR,QAAS,CACP,eAAgB,mBAChB,OAAU,kBAClB,EACM,KAAM,KAAK,UAAU,CAAE,MAAAe,CAAK,CAAE,CACpC,CAAK,EAED,GAAI,CAACb,EAAS,GAAI,CAChB,MAAMe,EAAY,MAAMf,EAAS,KAAI,EAAG,MAAM,KAAO,CAAA,EAAG,EACxD,MAAM,IAAI,MAAMe,EAAU,SAAW,qBAAqB,CAC5D,CAEA,OAAO,MAAMf,EAAS,KAAI,CAC5B,OAASC,EAAO,CACd,eAAQ,MAAM,qBAAsBA,CAAK,EAClC,CACL,QAAS,qCACf,CACE,CACF,EAGA,SAASM,EAAqBJ,EAAS,GAAI,CAiFzC,IAAIc,EAAW,CAAC,GAhFM,CACpB,CACE,IAAK,IACL,KAAM,aACN,OAAQ,EACR,eAAgB,IAChB,KAAM,EACN,SAAU,QACV,OAAQ,MACR,UAAW,OACX,WAAY,GAClB,EACI,CACE,IAAK,IACL,KAAM,gCACN,OAAQ,EACR,eAAgB,IAChB,KAAM,EACN,SAAU,QACV,OAAQ,SACR,UAAW,UACX,WAAY,EAClB,EACI,CACE,IAAK,IACL,KAAM,gCACN,OAAQ,EACR,eAAgB,GAChB,KAAM,EACN,SAAU,QACV,OAAQ,QACR,UAAW,UACX,WAAY,GAClB,EACI,CACE,IAAK,IACL,KAAM,oBACN,OAAQ,EACR,eAAgB,GAChB,KAAM,EACN,SAAU,QACV,OAAQ,MACR,UAAW,UACX,WAAY,EAClB,EACI,CACE,IAAK,IACL,KAAM,gBACN,OAAQ,EACR,eAAgB,IAChB,KAAM,EACN,SAAU,QACV,OAAQ,MACR,UAAW,YACX,WAAY,GAClB,EACI,CACE,IAAK,IACL,KAAM,WACN,OAAQ,EACR,eAAgB,IAChB,KAAM,EACN,SAAU,QACV,OAAQ,MACR,UAAW,OACX,WAAY,EAClB,EACI,CACE,IAAK,IACL,KAAM,uBACN,OAAQ,EACR,eAAgB,GAChB,KAAM,EACN,SAAU,QACV,OAAQ,wBACR,UAAW,kBACX,WAAY,GAClB,CACA,CAEkC,EAYhC,GAVId,EAAO,SACLA,EAAO,SAAW,UACpBc,EAAWA,EAAS,OAAOC,GAAM,CAAC,MAAO,SAAU,OAAO,EAAE,SAASA,EAAG,MAAM,CAAC,EACtEf,EAAO,SAAW,YAC3Bc,EAAWA,EAAS,OAAOC,GAAMA,EAAG,WAAa,OAAO,EAC/Cf,EAAO,SAAW,cAC3Bc,EAAWA,EAAS,OAAOC,GAAMA,EAAG,YAAc,MAAM,IAIxDf,EAAO,QAAS,CAClB,MAAMgB,EAAUhB,EAAO,QAAQ,YAAW,EAC1Cc,EAAWA,EAAS,OAAOC,GACzBA,EAAG,KAAK,cAAc,SAASC,CAAO,GACtCD,EAAG,OAAO,cAAc,SAASC,CAAO,GACxCD,EAAG,SAAS,YAAW,EAAG,SAASC,CAAO,CAChD,CACE,CAEA,MAAMC,EAAO,SAASjB,EAAO,IAAI,GAAK,EAChCkB,EAAU,GACVC,GAAcF,EAAO,GAAKC,EAC1BE,EAAWD,EAAaD,EAG9B,MAAO,CACL,QAHgBJ,EAAS,MAAMK,EAAYC,CAAQ,EAInD,WAAY,KAAK,KAAKN,EAAS,OAASI,CAAO,EAC/C,KAAMD,EACN,QAASC,EACT,MAAOJ,EAAS,MACpB,CACA,CAEA,SAASP,EAAgBD,EAAI,CAC3B,MAAMe,EAAgB,CACpB,EAAK,CACH,IAAK,IACL,KAAM,aACN,OAAQ,EACR,eAAgB,IAChB,KAAM,EACN,SAAU,QACV,OAAQ,MACR,UAAW,OACX,WAAY,IACZ,YAAa,8KACb,WAAY,UAClB,EACI,EAAK,CACH,IAAK,IACL,KAAM,gCACN,OAAQ,EACR,eAAgB,IAChB,KAAM,EACN,SAAU,QACV,OAAQ,SACR,UAAW,UACX,WAAY,GACZ,YAAa,2IACb,WAAY,cAClB,EACI,EAAK,CACH,IAAK,IACL,KAAM,uBACN,OAAQ,EACR,eAAgB,GAChB,KAAM,EACN,SAAU,QACV,OAAQ,wBACR,UAAW,kBACX,WAAY,IACZ,YAAa,4JACb,WAAY,UAClB,CACA,EAEE,OAAOA,EAAcf,CAAE,GAAKe,EAAc,CAAG,CAC/C,CCpRA,MAAMC,CAAa,CACjB,aAAc,CACZ,KAAK,YAAc,SAAS,eAAe,cAAc,EACzD,KAAK,aAAe,SAAS,eAAe,eAAe,EAC3D,KAAK,mBAAqB,SAAS,eAAe,qBAAqB,EACvE,KAAK,cAAgB,SAAS,iBAAiB,aAAa,EAC5D,KAAK,gBAAkB,SAAS,cAAc,mBAAmB,EACjE,KAAK,WAAa,SAAS,eAAe,YAAY,EACtD,KAAK,WAAa,SAAS,eAAe,aAAa,EACvD,KAAK,YAAc,SAAS,eAAe,cAAc,EAGzD,KAAK,cAAgB,SAAS,eAAe,gBAAgB,EAC7D,KAAK,YAAc,SAAS,eAAe,cAAc,EACzD,KAAK,WAAa,SAAS,eAAe,aAAa,EACvD,KAAK,iBAAmB,SAAS,eAAe,oBAAoB,EACpE,KAAK,gBAAkB,SAAS,eAAe,eAAe,EAC9D,KAAK,YAAc,SAAS,eAAe,cAAc,EACzD,KAAK,cAAgB,SAAS,eAAe,gBAAgB,EAC7D,KAAK,YAAc,SAAS,eAAe,cAAc,EAGzD,KAAK,cAAgB,SAAS,eAAe,gBAAgB,EAC7D,KAAK,eAAiB,SAAS,eAAe,aAAa,EAE3D,KAAK,cAAgB,UACrB,KAAK,cAAgB,GACrB,KAAK,YAAc,EACnB,KAAK,kBAAoB,KACzB,KAAK,eAAiB,EAEtB,KAAK,YAAc,KAAK,MAAM,aAAa,QAAQ,aAAa,CAAC,GAAK,CAAA,EACtE,KAAK,UAAY,KAAK,MAAM,aAAa,QAAQ,WAAW,CAAC,GAAK,CAAA,EAElE,KAAK,KAAI,CACX,CAEA,MAAM,MAAO,CACX,MAAM,KAAK,eAAc,EACzB,MAAM,KAAK,cAAa,EACxB,KAAK,mBAAkB,CACzB,CAEA,MAAM,gBAAiB,CACrB,GAAI,CACF,MAAMC,EAAY,MAAM3B,EAAU,EAC9B,KAAK,YAAc,KAAK,cAC1B,KAAK,WAAW,YAAc,IAAI2B,EAAU,KAAK,IACjD,KAAK,YAAY,YAAc,KAAKA,EAAU,MAAM,GAExD,OAASzB,EAAO,CACd,QAAQ,MAAM,uBAAwBA,CAAK,EAC3C,KAAK,WAAW,YAAc,8MAC9B,KAAK,YAAY,YAAc,aACjC,CACF,CAEA,MAAM,eAAgB,CACpB,GAAI,CACF,KAAK,YAAW,EAEhB,MAAME,EAAS,CAAA,EAGX,KAAK,gBACPA,EAAO,QAAU,KAAK,eAMxBA,EAAO,KAAO,KAAK,YACnBA,EAAO,MAAQ,GAEf,MAAMG,EAAO,MAAMJ,EAAeC,CAAM,EACxC,IAAIwB,EAAY,CAAA,EACZC,EAAa,EAEb,MAAM,QAAQtB,CAAI,GACpBqB,EAAYrB,EACZsB,EAAa,KAAK,KAAKD,EAAU,OAAS,EAAE,GACnCrB,EAAK,SAAW,MAAM,QAAQA,EAAK,OAAO,GACnDqB,EAAYrB,EAAK,QACjBsB,EAAatB,EAAK,YAAc,KAAK,MAAMA,EAAK,OAASqB,EAAU,QAAU,EAAE,GACtErB,EAAK,WAAa,MAAM,QAAQA,EAAK,SAAS,IACvDqB,EAAYrB,EAAK,UACjBsB,EAAatB,EAAK,YAAc,KAAK,MAAMA,EAAK,OAASqB,EAAU,QAAU,EAAE,GAGjF,KAAK,gBAAgBA,CAAS,EAC9B,KAAK,iBAAiBC,CAAU,CAElC,OAAS3B,EAAO,CACd,QAAQ,MAAM,2BAA4BA,CAAK,EAC/C,KAAK,UAAU,6CAA6C,CAC9D,CACF,CAEA,oBAAqB,CACf,KAAK,cACP,KAAK,aAAa,iBAAiB,QAAS,IAAM,KAAK,cAAc,EAGnE,KAAK,aACP,KAAK,YAAY,iBAAiB,WAAa4B,GAAM,CAC/CA,EAAE,MAAQ,SACZ,KAAK,aAAY,CAErB,CAAC,EAGH,KAAK,cAAc,QAAQC,GAAO,CAChCA,EAAI,iBAAiB,QAAS,IAAM,CAClC,KAAK,cAAc,QAAQC,GAAKA,EAAE,UAAU,OAAO,QAAQ,CAAC,EAC5DD,EAAI,UAAU,IAAI,QAAQ,EAC1B,KAAK,cAAgBA,EAAI,QAAQ,OACjC,KAAK,gBAAgB,YAAc,KAAK,cACxC,KAAK,cAAgB,GACjB,KAAK,cAAa,KAAK,YAAY,MAAQ,IAC/C,KAAK,YAAc,EACnB,KAAK,cAAa,CACpB,CAAC,CACH,CAAC,EAEG,KAAK,YACP,KAAK,WAAW,iBAAiB,QAAS,IAAM,KAAK,oBAAoB,EAGvE,KAAK,kBACP,KAAK,iBAAiB,iBAAiB,QAAS,IAAM,KAAK,kBAAkB,EAG/E,CAAC,KAAK,cAAe,KAAK,WAAW,EAAE,QAAQE,GAAS,CAClDA,GACFA,EAAM,iBAAiB,QAAU,GAAM,CACjC,EAAE,SAAWA,GACf,KAAK,eAAc,CAEvB,CAAC,CAEL,CAAC,EAED,SAAS,iBAAiB,UAAYH,GAAM,CACtCA,EAAE,MAAQ,UACZ,KAAK,eAAc,CAEvB,CAAC,EAEG,KAAK,aACO,KAAK,YAAY,iBAAiB,MAAM,EAChD,QAAQI,GAAQ,CACpBA,EAAK,iBAAiB,QAAS,IAAM,CACnC,KAAK,eAAiB,SAASA,EAAK,QAAQ,MAAM,EAClD,KAAK,YAAY,KAAK,cAAc,CACtC,CAAC,CACH,CAAC,EAGC,KAAK,iBACP,KAAK,gBAAgB,iBAAiB,QAAUJ,GAAM,CACpDA,EAAE,eAAc,EAChB,KAAK,mBAAkB,CACzB,CAAC,EAGC,KAAK,eACP,KAAK,cAAc,iBAAiB,SAAWA,GAAM,CACnDA,EAAE,eAAc,EAChB,KAAK,gBAAe,CACtB,CAAC,CAEL,CAEA,MAAM,cAAe,CACnB,KAAK,cAAgB,KAAK,YAAY,MAAM,KAAI,EAChD,KAAK,YAAc,EACnB,MAAM,KAAK,cAAa,CAC1B,CAEA,aAAc,CACR,KAAK,qBACP,KAAK,mBAAmB,UAAY,kDAExC,CAEA,UAAUK,EAAS,CACb,KAAK,qBACP,KAAK,mBAAmB,UAAY;AAAA;AAAA;AAAA,eAG3BA,CAAO;AAAA;AAAA;AAAA,QAKpB,CAEA,gBAAgBP,EAAW,CACzB,GAAK,KAAK,mBAEV,IAAIA,EAAU,SAAW,EAAG,CAC1B,KAAK,mBAAmB,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA,QAMpC,MACF,CAEA,KAAK,mBAAmB,UAAYA,EAAU,IAAIQ,GAAY;AAAA,4CACtBA,EAAS,KAAOA,EAAS,EAAE;AAAA;AAAA,uCAEhCA,EAAS,IAAI;AAAA;AAAA,wCAEZ,KAAK,aAAaA,EAAS,QAAU,CAAC,CAAC,WAAWA,EAAS,QAAU,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uCAMvEA,EAAS,gBAAkBA,EAAS,UAAY,CAAC,MAAMA,EAAS,MAAQ,CAAC;AAAA;AAAA;AAAA;AAAA,uCAIzEA,EAAS,UAAY,OAAO;AAAA;AAAA;AAAA;AAAA,uCAI5BA,EAAS,QAAU,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA,yCAKtB,KAAK,aAAa;AAAA,cAC7CA,EAAS,WAAaA,EAAS,YAAc,OAAS,8BAA8BA,EAAS,SAAS,UAAY,EAAE;AAAA;AAAA,+EAEnDA,EAAS,KAAOA,EAAS,EAAE;AAAA;AAAA;AAAA,KAGrG,EAAE,KAAK,EAAE,EACZ,CAEA,iBAAiBP,EAAY,CAC3B,GAAI,CAAC,KAAK,YAAcA,GAAc,EAAG,CACnC,KAAK,aAAY,KAAK,WAAW,UAAY,IACjD,MACF,CAEA,IAAIQ,EAAiB,GAEjB,KAAK,YAAc,IACrBA,GAAkB,oEAAoE,KAAK,YAAc,CAAC,iBAG5G,QAASC,EAAI,EAAGA,GAAKT,EAAYS,IAC3BA,IAAM,KAAK,YACbD,GAAkB,mCAAmCC,CAAC,YAEtDD,GAAkB,2DAA2DC,CAAC,MAAMA,CAAC,YAIrF,KAAK,YAAcT,IACrBQ,GAAkB,oEAAoE,KAAK,YAAc,CAAC,iBAG5G,KAAK,WAAW,UAAYA,CAC9B,CAEA,MAAM,SAAShB,EAAM,CACnB,KAAK,YAAcA,EACnB,MAAM,KAAK,cAAa,EACxB,OAAO,SAAS,CAAE,IAAK,KAAK,mBAAmB,UAAY,IAAK,SAAU,SAAU,CACtF,CAEA,MAAM,kBAAkBkB,EAAY,CAClC,GAAI,CACF,KAAK,kBAAoBA,EACzB,MAAMH,EAAW,MAAM3B,EAAc8B,CAAU,EAEzCC,EAAe,SAAS,eAAe,eAAe,EAC5D,GAAIA,EAAc,CAChB,MAAMC,EAAa,KAAK,UAAU,KAAKC,GAAOA,EAAI,KAAOH,CAAU,EAEnEC,EAAa,UAAY;AAAA;AAAA,kBAEfJ,EAAS,IAAI;AAAA;AAAA,0CAEW,KAAK,aAAaA,EAAS,QAAU,CAAC,CAAC,WAAWA,EAAS,QAAU,CAAC,KAAKA,EAAS,YAAc,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA,0CAKnGA,EAAS,QAAU,KAAK;AAAA;AAAA;AAAA;AAAA,0CAIxBA,EAAS,UAAY,OAAO;AAAA;AAAA;AAAA;AAAA,0CAI5BA,EAAS,WAAa,MAAM;AAAA;AAAA;AAAA;AAAA,0CAI5BA,EAAS,gBAAkBA,EAAS,UAAY,CAAC,MAAMA,EAAS,MAAQ,CAAC;AAAA;AAAA;AAAA;AAAA,mBAIhGA,EAAS,aAAe,2BAA2B;AAAA;AAAA;AAAA,8FAGwBG,CAAU;AAAA,kBACtFE,EAAa,wBAA0B,kBAAkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAQrE,CAEA,KAAK,cAAc,MAAM,QAAU,OACnC,SAAS,KAAK,MAAM,SAAW,QAEjC,OAASvC,EAAO,CACd,QAAQ,MAAM,gCAAiCA,CAAK,EACpD,KAAK,iBAAiB,kCAAmC,OAAO,CAClE,CACF,CAEA,oBAAqB,CACnB,KAAK,cAAc,MAAM,QAAU,OACnC,SAAS,KAAK,MAAM,SAAW,MACjC,CAEA,iBAAkB,CAChB,KAAK,mBAAkB,EACvB,KAAK,YAAY,MAAM,QAAU,OACjC,SAAS,KAAK,MAAM,SAAW,SAC/B,KAAK,gBAAe,CACtB,CAEA,kBAAmB,CACjB,KAAK,YAAY,MAAM,QAAU,OACjC,SAAS,KAAK,MAAM,SAAW,MACjC,CAEA,gBAAiB,CACf,KAAK,mBAAkB,EACvB,KAAK,iBAAgB,CACvB,CAEA,YAAYW,EAAQ,CACJ,KAAK,YAAY,iBAAiB,MAAM,EAChD,QAAQ,CAACqB,EAAMS,IAAU,CACzBA,EAAQ9B,EACVqB,EAAK,UAAU,IAAI,QAAQ,EAE3BA,EAAK,UAAU,OAAO,QAAQ,CAElC,CAAC,CACH,CAEA,iBAAkB,CAChB,KAAK,eAAiB,EACtB,KAAK,YAAY,CAAC,EACd,KAAK,gBAAe,KAAK,cAAc,MAAQ,IAC/C,KAAK,cAAa,KAAK,YAAY,MAAQ,GACjD,CAEA,MAAM,oBAAqB,CACzB,GAAI,CAAC,KAAK,eAAgB,CACxB,KAAK,iBAAiB,0BAA2B,OAAO,EACxD,MACF,CAEA,MAAMpB,EAAQ,KAAK,YAAc,KAAK,YAAY,MAAM,KAAI,EAAK,GAC3DC,EAAU,KAAK,cAAgB,KAAK,cAAc,MAAM,KAAI,EAAK,GAEvE,GAAI,CAACD,GAAS,CAAC,KAAK,aAAaA,CAAK,EAAG,CACvC,KAAK,iBAAiB,sCAAuC,OAAO,EACpE,MACF,CAEA,GAAI,CACF,MAAMF,EAAa,KAAK,kBAAmB,KAAK,eAAgBE,EAAOC,CAAO,EAE9E,KAAK,YAAY,KAAK,iBAAiB,EAAI,CACzC,OAAQ,KAAK,eACb,QAASA,EACT,MAAOD,EACP,KAAM,IAAI,KAAI,EAAG,YAAW,CACpC,EACM,aAAa,QAAQ,cAAe,KAAK,UAAU,KAAK,WAAW,CAAC,EAEpE,KAAK,iBAAiB,6BAA8B,SAAS,EAC7D,KAAK,iBAAgB,CAEvB,OAASZ,EAAO,CACd,QAAQ,MAAM,2BAA4BA,CAAK,EAC/C,KAAK,iBAAiB,gCAAiC,SAAS,EAChE,KAAK,iBAAgB,CACvB,CACF,CAEA,MAAM,iBAAkB,CACtB,MAAMY,EAAQ,KAAK,eAAiB,KAAK,eAAe,MAAM,KAAI,EAAK,GAEvE,GAAI,CAACA,GAAS,CAAC,KAAK,aAAaA,CAAK,EAAG,CACvC,KAAK,iBAAiB,sCAAuC,OAAO,EACpE,MACF,CAEA,GAAI,CACF,MAAMG,EAAUH,CAAK,EACrB,KAAK,iBAAiB,6BAA8B,SAAS,EACzD,KAAK,eAAe,KAAK,cAAc,MAAK,CAClD,OAASZ,EAAO,CACd,QAAQ,MAAM,qBAAsBA,CAAK,EACzC,KAAK,iBAAiB,0BAA2B,SAAS,EACtD,KAAK,eAAe,KAAK,cAAc,MAAK,CAClD,CACF,CAGA,eAAeqC,EAAY,CAEzB,MAAMC,EAAe,SAAS,eAAe,eAAe,EAC5D,GAAI,CAACA,EAAc,OAEnB,MAAMI,EAAOJ,EAAa,cAAc,IAAI,GAAG,aAAe,UACxDK,EAAYL,EAAa,iBAAiB,YAAY,EAE5D,IAAIM,EAAW,MAAOC,EAAS,MAAOC,EAAiB,IAAKC,EAAO,IAEnEJ,EAAU,QAAQK,GAAQ,CACxB,MAAMC,EAAQD,EAAK,cAAc,aAAa,GAAG,YAC3CE,EAAQF,EAAK,cAAc,aAAa,GAAG,YAIjD,GAFIC,IAAU,cAAaL,EAAWM,GAClCD,IAAU,WAAUJ,EAASK,GAC7BD,IAAU,kBAAmB,CAC/B,MAAME,EAAQD,EAAM,MAAM,KAAK,EAC/BJ,EAAiBK,EAAM,CAAC,GAAK,IAC7BJ,EAAOI,EAAM,CAAC,GAAG,MAAM,MAAM,EAAE,CAAC,GAAK,GACvC,CACF,CAAC,EAED,MAAMC,EAAe,CAAE,GAAIf,EAAY,KAAAK,EAAM,SAAAE,EAAU,OAAAC,EAAQ,eAAAC,EAAgB,KAAAC,CAAI,EAC7EN,EAAQ,KAAK,UAAU,UAAUD,GAAOA,EAAI,KAAOH,CAAU,EAE/DI,IAAU,IACZ,KAAK,UAAU,KAAKW,CAAY,EAChC,KAAK,iBAAiB,sBAAuB,SAAS,IAEtD,KAAK,UAAU,OAAOX,EAAO,CAAC,EAC9B,KAAK,iBAAiB,0BAA2B,MAAM,GAGzD,aAAa,QAAQ,YAAa,KAAK,UAAU,KAAK,SAAS,CAAC,EAGhE,MAAMY,EAAc,SAAS,cAAc,eAAe,EAC1D,GAAIA,EAAa,CACf,MAAMd,EAAa,KAAK,UAAU,KAAKC,GAAOA,EAAI,KAAOH,CAAU,EACnEgB,EAAY,YAAcd,EAAa,wBAA0B,kBACnE,CACF,CAGA,aAAa5B,EAAQ,CACnB,MAAM2C,EAAY,KAAK,MAAM3C,CAAM,EAC7B4C,EAAc5C,EAAS,GAAK,GAClC,IAAI6C,EAAQ,GAEZ,QAASpB,EAAI,EAAGA,EAAI,EAAGA,IACjBA,EAAIkB,EACNE,GAAS,IACApB,IAAMkB,GAAaC,EAC5BC,GAAS,IAETA,GAAS,IAIb,OAAOA,CACT,CAEA,aAAa5C,EAAO,CAElB,MADW,6BACD,KAAKA,CAAK,CACtB,CAEA,iBAAiBqB,EAASwB,EAAO,OAAQ,CACvC,MAAMC,EAAkB,SAAS,cAAc,eAAe,EAC1DA,GACFA,EAAgB,OAAM,EAGxB,MAAMC,EAAe,SAAS,cAAc,KAAK,EACjDA,EAAa,UAAY,6BAA6BF,CAAI,GAC1DE,EAAa,YAAc1B,EAE3B0B,EAAa,MAAM,QAAU;AAAA;AAAA;AAAA;AAAA,oBAIbF,IAAS,UAAY,UAAYA,IAAS,QAAU,UAAY,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MASzF,SAAS,KAAK,YAAYE,CAAY,EAEtC,WAAW,IAAM,CACXA,EAAa,YAAYA,EAAa,OAAM,CAClD,EAAG,GAAI,EAEP,MAAMC,EAAQ,SAAS,cAAc,OAAO,EAC5CA,EAAM,YAAc;AAAA;AAAA;AAAA;AAAA;AAAA,MAMpB,SAAS,KAAK,YAAYA,CAAK,CACjC,CACF,CAEA,MAAMC,EAAe,IAAIrC,EACzB,OAAO,aAAeqC"}